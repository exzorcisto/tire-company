# Лабораторная работа №2: Интеграция React Query в Sibirea Tires

## Цель работы
Оптимизация работы с серверным состоянием (Server State) в существующем проекте. Замена стандартной логики `useEffect` и `useState` на библиотеку **TanStack Query** для реализации кэширования, обработки состояний загрузки и оптимистичных обновлений.

## Стек технологий
* **React Query (TanStack Query)** — управление асинхронными данными.
* **Axios** — HTTP-клиент для связи с API.
* **React Query DevTools** — отладка и мониторинг кэша.

## Реализованный функционал
1. **Глобальная конфигурация**: В `main.jsx` настроен `QueryClient` с параметрами `staleTime: 5 мин` и `retry: 2`, что предотвращает лишние сетевые запросы.
2. **Кастомный хук `useTiresQuery`**:
   * Вся логика работы с API (GET, POST, DELETE, PUT) инкапсулирована в один хук.
   * Реализовано ручное управление кэшем через `setQueryData` для корректной работы с фейковым API (JSONPlaceholder).
3. **Optimistic Updates**: Добавление новых моделей шин происходит мгновенно в UI, не дожидаясь ответа от сервера, что значительно повышает отзывчивость интерфейса.
4. **Индикация состояний**: Компоненты используют встроенные флаги `isLoading` и `isError` для отображения корректного UI пользователю.

## Основные преимущества после внедрения
* **Кэширование**: Данные каталога сохраняются при навигации по сайту.
* **Автоматическая синхронизация**: Инвалидация кэша (`invalidateQueries`) гарантирует актуальность данных после удаления или изменения записей.
* **Сокращение кода**: Компонент `Catalog.jsx` избавлен от громоздких `useEffect` и ручного управления флагами загрузки.

## Инструкция по мониторингу
Для проверки работы кэша используйте встроенную кнопку **React Query DevTools** в нижнем углу приложения. Там можно увидеть состояние каждого запроса (fresh, stale, fetching).

---
**Sibirea Tires Project** | Лабораторная работа №2 по курсу React-разработки.